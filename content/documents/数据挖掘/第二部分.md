---
author: "Lingyu Zhang"
author_link: "https://jarviszly.com/"
title: "第二部分"
date: 2020-02-26T19:36:58+08:00
lastmod: 2020-02-26T19:36:58+08:00
draft: false
description: ""
show_in_homepage: true
description_as_summary: false
license: ""

tags: [数据挖掘]
categories: [数据挖掘]

featured_image: ""
featured_image_preview: ""

comment: true
toc: true
auto_collapse_toc: true
math: true
---

# Data Cube And OLAP
<!--more-->
## Data warehouse
- 数据仓库是支持管理决策过程的面向主题的，集成的，长期的，稳定的数据集合
- 关系数据库
  - On-line transaction processing(**OLTP**)
- 数据仓库
  - On-line analytical processing(**OLAP**)
- OLAP architecture
![architecture](/images/documents/数据挖掘导论/OLAParchitecture.png)

## Data model for data warehouse
- **多维数据模型(Multidimensional data model)**
  - 维度指的是和那些数据仓库管理者期望相关的视角或实体
- 模型
  - 星型模型: 一个事务表在中间连接一些维度表
    ![star shema](/images/documents/数据挖掘导论/starschema.png)
  - 雪花模型: 在星型模型的基础上可以存在某些维度表向外部连接其他更小的维度表
    ![Snowflake shcema](/images/documents/数据挖掘导论/snowschema.png)

  - 星系模型：由多个星型模型组成，事务表之间由维度表连接起来。
    ![Constellation shcema](/images/documents/数据挖掘导论/constellationschema.png)



## Data Cube
- Data Cube 是由一个个立方体组成的格。其只是一个理论上的东西，并不是实际上数据存储的方式。

### Concept Hierachy(概念层次结构)
- 概念层次结构是一序列的从低层级到高层级的映射组成
- 具体的层次
  - 模式层次：全序和偏序
  - 集分组层次结构：将较大的集合不断拆分成较小的集合

## OLAP在Data Cube上的操作(operations) 
- **roll-up**: 将某一维度提升一个层次结构或者删除某些维度。
  ![roll-up](/images/documents/数据挖掘导论/roll-up.png)
- **drill-down**: 和roll-up操作对立
  ![drill-down](/images/documents/数据挖掘导论/drill-down.png)
- **slice**: 在Data Cube上确定一个维度的值，相当于从立方体上切一片
  ![slice](/images/documents/数据挖掘导论/slice.png)
- **dice**: 在Data Cube上对多个维度的选择，相当于从立方体上切小一小块
  ![dice](/images/documents/数据挖掘导论/dice.png)
- **pivot**: 对Data Cube进行旋转
  ![pivot](/images/documents/数据挖掘导论/pivot.png)

## Data Cube Measures
- 定义：一个data cube measure 是一个能够在data cude空间中每一个点上进行估算的数值函数。
- 分布聚合函数(Distributive aggregate function)：
  - 假设数据分成n份
  - 该函数在每一份上计算出一个聚合值
  - 由该函数在每一份上计算出聚合值派生的结果和由该函数直接作用在整个数据上的结果一致
  - 比如：count(),sum(),min(),max()
- Measures的分类
  - 分布的(Distributive): 通过分布聚合函数得到的，如count(),sum()
  - 代数的(Algebraic): 通过一个代数函数作用在M(M是一个有界的整数)个由分布聚合函数得到的参数上得到，如avg(),min_N(),max_N(),standard_deviation()
  - 整体的(Holistic): 没有一个常数的界来限制用来描述一个子聚合的存储空间。如rank(),median(),mode()

## OLAP 服务架构
- **ROLAP(Relational OLAP)**
  - 使用(拓展)关系数据库来存储数据仓库
  - 有较好的可扩展性
- **MOLAP(Multidimensional OLAP)**
  - 使用基于数组的多维度存储引擎
  - 能很快地索引到 **提前计算好(pre-computed)** 地总计数据
- **HOLAP(Hybrid OLAP)**
  - 同时具备ROLAP的扩展性和MOLAP的计算速度快
- **Specialized SQL servers**
  - 支持在星型模型和雪花模型上的SQL查询

### 预先计算(precompute)
- 提前计算能够保证较快的反映时间和避免冗余的计算
- 预先计算最好的方式：
  - **部分具体化(提前计算部分数据立方体)**，优于无具体化(响应时间长)和全部具体化(存储开销大)

### 有效的计算
- 以ROLAP(基于tuples 和 relational tables)为基础的cube计算
  - 基于一些**优化技巧**，相对较慢
- 以MOLAP(基于multidimensional array)为基础的cube计算
  - 基于**多路数组的聚合**，相对较快