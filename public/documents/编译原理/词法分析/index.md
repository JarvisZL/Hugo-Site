# 词法分析


## 词法单元，模式，词素
- 词法单元：词法分析器识别出来的单元，其是一个类别名称(比如标识符，字符串等)
- 模式：是词法分析器去识别输入字节流中哪些东西是哪种词法单元的模板。
- 词素：是被识别为词法单元的实例。

## 正则表达式

### 归纳步骤
- 选择： $(r) | (s) = L(r) | L(S)$ 表示r或者s
- 连接：$(r)(s) = L(r)L(s)$
- 闭包：$(r)^* (L(r))^*$
- 括号：$((r)) = L(r)$

### 扩展运算符
- 一个或多个：$r^+$
- 0个或一个：$r?$
- 字符类: $[a-z]$或者$[0-9]$


## 词法单元的识别(状态转换图)
- 节点(状态)，边(从一个状态到另一个状态)
- 词法分析器的实际是模拟转换图的运行。


## 有穷自动机
- 本质上和状态转换图相同但其只回答yes/or
- 分为NFA(不确定有穷自动机)和DFA(确定的有穷自动机)

### 不确定有穷自动机
- 一个有穷的状态集合S, 一个输入符号集合$\Sigma$
- 转换函数对于每个状态和收到的字符给出相应的后继状态集合
- S中的某个状态$s_0$被指定为开始状态，其一个子集F被指定为接受状态集合
- 其不确定性在于，对于一个状态a和输入e其后继状态不唯一。
  

### 确定的有穷自动机
- 对NFA加上限制
  - 没有标号为$\epsilon$的转换
  - 对于每个状态和每个输入，有且仅有一条出去的边。


## 从表示到执行
- 正则表达式到NFA
  - 构造，对于多个正则表达式，先分别构造NFA，然后加一个$s_0$然后$s_0$可以$\epsilon$转移到任意一个NFA的开始。
- NFA到DFA
  - 子集构造法：用一个DFA的状态表示一个NFA的状态子集。
- DFA的状态数量最小
  - 状态可区分：如果存在一个输入使得两个状态其中一个到达接受状态，另一个没到达，则说明两个状态不等价。
  - 初始$\epsilon$区分了接受和非接受，如果s和t可区分而$s^\prime \mathop{\rightarrow} \limits^a s, t^\prime \mathop{\rightarrow} \limits^a t$,则$s^\prime$和$t^\prime$也可区分。

- 引入死状态来保证，当一个状态遇到非预期内的输入该怎么办。
